# 开发日记

| 大模块 | 开发功能 | 描述 | 日期 |
|--------|---------|------|------|
| JSON序列化 | JSON工具添加行号功能 | 为JSON工具的文本编辑器添加行号显示功能：<br>1. 界面改进：<br>- 在文本编辑器左侧添加行号显示区域<br>- 行号与文本内容垂直对齐<br>- 保持与现有设计风格一致<br>2. 技术实现：<br>- 使用flex布局实现行号与文本区域的布局<br>- 监听文本变化自动更新行号<br>- 实现滚动同步功能<br>3. 用户体验提升：<br>- 行号区域使用浅色背景区分<br>- 行号右对齐便于阅读<br>- 禁用行号区域选择避免干扰 | 2024-05-27 16:30:00 |
| Cron表达式 | Cron表达式指定选择器优化 | 改进Cron表达式生成器的指定值选择器：<br>1. 浮动式选择面板：<br>- 将原本内嵌的数字选择网格改为点击后弹出的浮动面板<br>- 实现点击其他区域自动关闭选择面板<br>- 添加关闭按钮和确认按钮<br>2. 空间优化：<br>- 大幅减少页面占用空间，提高界面紧凑性<br>- 以按钮+下拉形式替代常驻显示的选择网格<br>- 选中值在按钮上直观显示，最多显示5个值<br>3. 交互体验提升：<br>- 选择完成后自动关闭面板<br>- 显示已选值的数量和部分预览<br>- 网格选择器尺寸和样式优化 | 2024-05-27 15:40:00 |
| Cron表达式 | Cron表达式UI强制3列布局 | 优化Cron表达式生成器配置面板布局为固定3列：<br>1. 布局调整：<br>- 移除响应式布局中对列数的自动调整<br>- 无论屏幕宽度如何，均保持3列布局<br>- 确保配置面板在各种设备上保持一致性<br>2. 小屏幕适配优化：<br>- 在较小屏幕上减小面板间距和内边距<br>- 缩小字体和控件尺寸以适应更紧凑布局<br>- 调整控件间距以保持可用性<br>3. 用户体验考量：<br>- 满足用户对更紧凑布局的偏好<br>- 在移动设备上确保仍可操作，虽然更紧凑<br>- 提高屏幕空间利用率，减少滚动操作 | 2024-04-23 14:30:00 |
| Cron表达式 | Cron表达式UI布局优化 | 优化Cron表达式生成器配置面板布局：<br>1. 布局调整：<br>- 将配置面板从一行显示2个改为显示3个<br>- 增加界面布局的利用率，减少空白区域<br>- 使整体结构更加紧凑，提高视觉效率<br>2. 响应式优化：<br>- 重新设计断点，在不同屏幕尺寸下自动调整显示数量<br>- 1400px以上显示3个面板/行<br>- 768px-1400px显示2个面板/行<br>- 768px以下显示1个面板/行<br>3. 交互体验提升：<br>- 减少了页面滚动需求<br>- 更好地利用宽屏设备的空间<br>- 保持各配置面板合理尺寸，确保操作舒适度 | 2024-04-22 10:15:00 |
| 系统文档 | README.md更新与资源目录优化 | 全面更新项目说明文档和优化资源目录：<br>1. README.md升级：<br>- 更新项目概述和架构说明<br>- 增加"最新更新"和"未来计划"章节<br>- 完善工具功能详细说明<br>- 添加屏幕截图部分<br>2. 资源目录结构优化：<br>- 创建assets/images目录用于存放项目截图<br>- 将第三方库移动到assets/lib目录<br>- 保持资源文件分类整齐<br>3. 文档内容一致性维护：<br>- 确保所有文档描述与实际功能匹配<br>- 统一文档风格和格式<br>- 更新工具描述反映最新特性 | 2024-04-21 09:30:00 |
| 系统架构 | 目录结构优化 | 优化项目目录结构以提高代码组织性：<br>1. 添加tools目录：<br>- 创建tools目录存放简化版功能模块<br>- 将功能组件化，便于在layout.html中嵌入<br>- 避免重复的标题栏和导航菜单<br>2. 统一布局结构：<br>- 创建layout.html作为统一页面框架<br>- 通过iframe加载工具模块实现整合<br>- 减少重复代码，提高维护效率<br>3. 文档更新：<br>- 更新DirectoryStructure.md<br>- 完善每个目录和文件的详细说明 | 2024-04-20 14:30:00 |
| Cron表达式 | Cron表达式生成器V5重构 | 完全重构Cron表达式生成器，开发V5版本：<br>1. 核心改进：<br>- 支持7位长度的cron表达式（增加年字段）<br>- 采用模块化架构设计，提升代码可维护性<br>- 全新的可视化配置界面，更加直观友好<br>2. 界面优化：<br>- 简洁明了的布局，提升用户体验<br>- 直观的配置选项，包含即时视觉反馈<br>- 表达式输入框置顶，方便直接编辑<br>- 全新的常用表达式选择区<br>3. 增强功能：<br>- 表达式与配置界面实时双向更新<br>- 支持直接输入表达式并解析到界面<br>- 高效计算并展示未来10次执行时间<br>- 全面支持所有cron表达式格式 | 2024-04-15 11:30:00 |
| 首页导航 | 系统首页开发 | 开发了AdiToolBox的系统首页：<br>1. 界面设计：<br>- 采用响应式卡片式布局<br>- 每个工具以直观的卡片呈现<br>- 包含工具图标、名称、描述和功能标签<br>- 预留未来扩展功能位置<br>2. 交互功能：<br>- 记录最近访问的工具<br>- 悬停动画效果增强用户体验<br>- 支持移动设备访问<br>3. 统一导航：<br>- 所有工具页面添加返回首页链接<br>- 保持全站UI风格一致性<br>- 优化标题命名规范 | 2024-04-12 15:30:00 |
| 系统维护 | 清理旧版本文件 | 清理项目中的旧版本文件：<br>1. 删除内容：<br>- 移除Cron表达式生成器V1-V3版本<br>- 移除字符串对比工具V1版本<br>2. 保留最新版本：<br>- 只保留Cron表达式生成器V4<br>- 只保留字符串对比工具V2<br>3. 更新文档：<br>- 更新DirectoryStructure.md<br>- 更新README.md，反映最新版本 | 2024-04-12 10:15:32 |
| Cron表达式 | Cron表达式生成器V4优化 | 完善Cron表达式生成器V4版本：<br>1. 界面改进：<br>- 从选项卡式改为面板式设计，同时显示所有时间单位配置<br>- 将表达式输入框移至顶部，提高可视性<br>- 优化各输入控件布局和尺寸<br>2. 功能修复：<br>- 修复了"0/n"格式周期表达式的验证问题<br>- 修复了执行时间计算中的匹配算法<br>- 优化了数字输入框的样式和可用性<br>3. 表达式引擎优化：<br>- 提升了表达式解析和生成的准确性<br>- 增强了复杂表达式的处理能力<br>- 改进了执行时间计算的性能 | 2024-04-04 10:30:00 |
| Cron表达式 | Cron表达式生成器 | 开发Cron表达式生成器工具：<br>1. 核心功能：<br>- 可视化编辑cron表达式各部分（秒、分、时、日、月、周）<br>- 表达式与界面双向转换<br>- 计算并显示最近10次触发时间<br>- 常用表达式模板快速应用<br>2. 技术实现：<br>- 使用原生JavaScript实现表达式解析和生成<br>- 自定义选择器组件处理各时间单位<br>- Date对象计算触发时间<br>- 响应式布局适配不同设备<br>- 完善的错误处理和反馈 | 2024-04-01 16:30:00 |
| 字符串对比 | 集成diff_match_patch | 改进字符串对比功能：<br>1. 集成Google的diff_match_patch库：<br>- 替换简单的行对比算法<br>- 支持字符级别的精细对比<br>- 提高对比准确性<br>2. 技术实现：<br>- 下载库文件到本地<br>- 优化对比显示逻辑<br>- 重构代码提高性能 | 2024-04-01 15:45:00 |
| 字符串对比 | 字符串对比工具 | 开发字符串对比工具：<br>1. 界面功能：<br>- 左右两个可调整大小的文本框<br>- 支持文本框同步拖动<br>- 差异高亮显示<br>- 支持复制对比结果<br>2. 技术实现：<br>- 使用diff-match-patch库进行文本对比<br>- ResizeObserver实现同步拖动<br>- 响应式布局适配<br>- 完善的错误处理 | 2024-04-01 14:30:00 |
| JSON序列化 | JSON序列化历史记录 | 新增JSON序列化历史记录功能：<br>1. 界面功能：<br>- 右侧显示历史记录列表<br>- 显示操作时间和内容预览<br>- 点击记录可恢复内容<br>2. 技术实现：<br>- 使用localStorage本地存储<br>- 限制最大记录数量为20条<br>- 支持清空历史记录<br>- 响应式布局适配 | 2024-04-01 |
| JSON序列化 | 转义功能修复 | 修复转义功能的错误：<br>1. 移除了对\b（退格符）的错误处理：<br>- 修复了数字字符串被错误添加\b的问题<br>- 优化了转义字符的处理逻辑<br>2. 保留最基本的转义：<br>- 双引号和单引号<br>- 反斜杠<br>- 换页符 | 2024-04-01 |
| JSON序列化 | 转义功能优化 | 优化文本转义功能：<br>1. 保留特定字符原样：<br>- 保留换行符(\n)<br>- 保留空格<br>- 保留Tab缩进(\t)<br>2. 只转义必要的特殊字符：<br>- 双引号和单引号<br>- 反斜杠<br>- 换页符和退格符 | 2024-04-01 |
| JSON序列化 | JSON压缩优化 | 改进JSON压缩功能：<br>1. 优化压缩策略：<br>- 支持处理已序列化的JSON字符串<br>- 完全移除所有空格、换行和缩进<br>- 优化错误处理和提示<br>2. 确保压缩后的JSON保持有效性 | 2024-04-01 |
| JSON序列化 | JSON序列化修复 | 修复JSON序列化逻辑：<br>1. 优化JSON解析策略：<br>- 优先尝试解析去除转义后的文本<br>- 如果失败则尝试解析原始文本<br>- 最后才作为普通文本处理<br>2. 确保JSON字符串能够正确解析和格式化 | 2024-04-01 |
| JSON序列化 | JSON工具功能优化 | 1. 修复JSON序列化问题：<br>- 添加格式化输出（2空格缩进）<br>- 修复转义文本序列化问题<br>2. 新增撤销/重做功能：<br>- 支持Mac(Cmd+Z/Cmd+Shift+Z)和Windows(Ctrl+Z/Ctrl+Y)快捷键<br>- 实现50步历史记录<br>- 支持文本框所有操作的撤销/重做 | 2024-04-01 |
| JSON序列化 | JSON工具界面优化 | 优化了JSON工具页面的用户界面：<br>1. 简化为单一文本框设计，提升用户体验<br>2. 支持文本框大小拖动调整<br>3. 优化了文本处理逻辑，所有操作直接在原文本框中更新<br>4. 改进了复制功能，支持选中文本复制<br>5. 优化了响应式布局和样式 | 2024-04-01 |
| JSON序列化 | JSON工具页面 | 创建了JSON工具页面，包含以下功能：<br>1. JSON序列化：支持将文本转换为JSON字符串<br>2. JSON压缩：移除JSON中的空格和换行<br>3. 文本转义：支持选中文本或全文进行转义处理<br>4. 去除转义：支持选中文本或全文去除转义字符<br>5. 复制和清空功能<br><br>技术特点：<br>- 纯静态页面实现<br>- 现代化UI设计<br>- 响应式布局<br>- 完善的错误处理<br>- 用户友好的操作反馈 | 2024-04-01 |
| 字符串对比 | 重构字符串差异对比工具 | 重新开发了字符串差异对比工具，创建了V2版本。新版本采用了更现代的开发方式，提供了更好的用户体验和性能优化。 | 2024-03-21 14:30:00 |
| 字符串对比 | 重构字符串差异对比工具 | 功能描述 | 2024-03-21 14:30:00 |
| 字符串对比 | 重构字符串差异对比工具 | 技术栈 | 2024-03-21 14:30:00 |
| 字符串对比 | 重构字符串差异对比工具 | 主要改进 | 2024-03-21 14:30:00 |
| 字符串对比 | 重构字符串差异对比工具 | 涉及文件 | 2024-03-21 14:30:00 |
| 字符串对比 | 重构字符串差异对比工具 | 开发思路 | 2024-03-21 14:30:00 |
| 字符串对比 | 重构字符串差异对比工具 | 后续计划 | 2024-03-21 14:30:00 |
| 快速导航菜单 | 在各功能页面之间添加快速导航功能，用户无需返回首页即可在不同工具间切换 | CSS+JavaScript，使用了fixed定位和下拉菜单动画效果 | 2024-03-27 10:15:23 |
| 系统部署 | Docker部署支持 | 添加Docker容器化部署支持：<br>1. Docker配置：<br>- 创建Dockerfile，基于nginx:alpine镜像<br>- 配置静态文件目录和端口映射<br>- 创建docker-compose.yml简化部署<br>2. 文档更新：<br>- 在README.md中添加Docker部署说明<br>- 更新DirectoryStructure.md<br>- 完善部署文档<br>3. 部署优化：<br>- 使用轻量级nginx:alpine基础镜像<br>- 配置合理的端口映射（8080:80）<br>- 添加容器自动重启策略 | 2024-03-28 16:45:00 |

## 开发日志

| 功能 | 描述 | 技术栈 | 时间 |
| --- | --- | --- | --- |
| 快速导航菜单 | 在各功能页面之间添加快速导航功能，用户无需返回首页即可在不同工具间切换 | CSS+JavaScript，使用了fixed定位和下拉菜单动画效果 | 2024-03-27 10:15:23 |
| 字符串对比 | 重构字符串差异对比工具 | 技术栈 | 2024-03-21 14:30:00 |

## 首页开发 - 2024年4月12日 15:30:00

### 开发思路
为AdiToolBox开发一个统一的首页，作为所有工具的入口，提高用户体验和系统整体性。首页采用了卡片式设计，每个工具以直观的卡片形式呈现，包含图标、名称、描述和功能标签，用户可以直接点击进入对应的工具页面。

### 设计理念
1. 统一入口：将所有工具集中展示，提供便捷访问
2. 可扩展性：预留未来新增功能的位置，支持系统不断扩展
3. 一致的UI：确保所有页面间导航的连贯性和风格一致性
4. 响应式设计：适配不同设备和屏幕尺寸

### 技术实现
1. 采用CSS Grid布局实现响应式卡片网格
2. 使用CSS变量确保颜色、字体等样式的一致性
3. 利用localStorage记录用户最近使用的工具
4. SVG图标确保在不同尺寸下的清晰度

### 主要特点
1. 工具卡片：每个功能以卡片形式展示，包含图标、描述和标签
2. 悬停效果：卡片悬停时有轻微上浮和阴影加深效果，增强交互体验
3. 最近使用标记：显示用户最近使用的工具
4. 开发中功能：以半透明方式展示即将推出的功能
5. 导航一致性：所有工具页面添加了返回首页的链接

### 未来计划
1. 添加工具搜索功能
2. 增加工具使用统计和推荐
3. 支持用户自定义工具排序
4. 增加深色模式支持

## Cron表达式生成器 V4 - 2024年4月2日 14:00:00

### 开发思路
在之前Cron表达式生成器的基础上，完全重新设计了一个更加简洁、直观的界面。采用了面板式设计，使用户可以同时查看和配置Cron表达式的各个部分（秒、分、时、日、月、周、年）。

新设计有以下特点：
1. 面板式界面，同时显示所有时间单位配置，提供全局视图
2. 表达式输入框置顶，方便直接编辑和查看
3. 更现代的UI设计，提升用户体验
4. 强大的表达式验证和解析功能
5. 实时显示未来10次执行时间
6. 提供常用表达式快捷选择

### 技术栈
- 纯CSS：使用CSS变量和现代布局技术（Flex和Grid）实现响应式设计
- 原生JavaScript：面向对象编程，无需任何外部库
- HTML5：语义化标记和先进表单控件

### 涉及文件
- `pages/cron-generator4.html`：页面结构，使用面板式设计
- `assets/css/cron-generator4.css`：样式文件，提供现代化UI
- `assets/js/cron-generator4.js`：功能实现，包含表达式生成、验证和时间计算 

## Cron表达式生成器 V5 - 2024年4月15日 11:30:00

### 开发思路
针对之前版本中存在的问题，完全重新设计并构建了Cron表达式生成器的V5版本。采用全新的架构和设计，重点关注用户体验、界面美观度、功能完整性和性能优化。V5版本是一个全新的实现，支持7位长度Cron表达式，完全符合标准规范。

### 主要改进
1. **结构升级**：
   - 支持7位Cron表达式（秒、分、时、日、月、周、年）
   - 使用模块化架构设计，各功能模块独立，代码更清晰
   - 采用更现代的DOM操作方式，提高性能和可维护性
   - 设计更合理的数据流管理，界面与数据双向绑定更稳定

2. **界面优化**：
   - 表达式输入框置顶设计，更方便直接查看和编辑
   - 使用网格布局组织配置面板，视觉更平衡
   - 采用简洁现代的UI设计风格，减少视觉干扰
   - 改进各选择器的交互方式，更加符合用户习惯
   - 优化响应式布局，在各种设备上都有良好体验

3. **功能加强**：
   - 表达式与配置界面实时双向更新，无延迟
   - 更精确的Cron表达式验证逻辑
   - 优化执行时间计算算法，提高精度和性能
   - 提供更多常用Cron表达式示例，方便快速选择
   - 改进错误处理和用户反馈机制

### 技术实现
1. **前端架构**：
   - 纯原生JavaScript实现，不依赖任何外部库
   - 基于事件驱动的架构设计
   - 使用ES6+的现代JavaScript特性
   - 采用模块化设计模式组织代码

2. **UI设计**：
   - 使用CSS Grid和Flexbox布局系统
   - 采用CSS变量实现主题一致性
   - 响应式设计适配各种设备和屏幕尺寸
   - 优化动画和过渡效果，提升体验流畅度

3. **Cron解析引擎**：
   - 自研高效的Cron表达式解析和生成算法
   - 完善的验证规则确保表达式有效性
   - 智能处理日期和星期的互斥关系
   - 采用高效算法计算后续执行时间

### 涉及文件
- `pages/cron-generator5.html`：全新设计的页面结构
- `assets/css/cron-generator5.css`：全新的样式文件
- `assets/js/cron-generator5.js`：全新的功能实现

### 后续计划
1. 增加对更多特殊Cron表达式格式的支持
2. 添加时区选择功能
3. 增加表达式保存和导入功能
4. 提供表达式的自然语言描述
5. 优化执行时间算法的效率 

## 2024-01-23 15:45:23 增强JSON工具功能

### 功能描述
1. 添加了JSON编辑器组件(jsoneditor)，支持树形结构展示和代码编辑
2. 实现了JSON节点的折叠/展开功能
3. 优化了转义和去除转义功能，支持选中文本处理
4. 保持了与原有功能的兼容性

### 开发思路
1. 集成jsoneditor组件：
   - 使用CDN引入jsoneditor的JS和CSS
   - 配置jsoneditor支持代码视图和树形视图
   - 隐藏原始编辑器，使用jsoneditor替代

2. 优化转义功能：
   - 使用jsoneditor的aceEditor API获取选中文本
   - 实现选中文本的局部转义/去除转义
   - 保持选区位置不变

### 使用的技术
1. jsoneditor v9.10.2
2. Ace Editor API
3. JavaScript DOM操作
4. 正则表达式处理文本

### 涉及的文件
1. tools/json-tools.html
   - 添加jsoneditor依赖
   - 修改页面结构
   - 调整样式

2. assets/js/json-tools.js
   - 添加jsoneditor初始化配置
   - 实现新的工具函数
   - 修改事件处理逻辑

### 遇到的问题及解决方案
1. jsoneditor工具栏显示问题
   - 问题：工具栏占用空间且不需要
   - 解决：通过配置隐藏工具栏

2. 文本转义范围问题
   - 问题：转义总是作用于全部文本
   - 解决：使用aceEditor API精确处理选中区域

3. JSON解析错误处理
   - 问题：非JSON文本导致解析错误
   - 解决：添加错误处理和用户提示 